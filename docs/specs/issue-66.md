# 需求规格说明书

> **Issue**: #66
> **创建时间**: 2026-02-13
> **状态**: 草稿

## 背景与目标

### 业务背景

当前项目需要一个游戏示例目录，用于存放Python小游戏。这将为项目增加以下价值：
- 展示Python项目的组织结构和最佳实践
- 提供可运行的Python代码示例
- 演示使用uv进行Python项目管理的方法
- 为学习Python编程提供简单有趣的示例

贪吃蛇游戏是一个经典的入门游戏项目，具有以下特点：
- 逻辑简单，易于理解
- 包含基础的游戏循环和控制逻辑
- 适合作为Python编程学习示例

### 目标

本需求旨在创建一个简单的Python贪吃蛇游戏，作为项目游戏示例的起点。

**主要目标：**
- 在根目录创建game目录，用于存放Python小游戏
- 实现一个可运行的贪吃蛇游戏
- 使用uv进行Python依赖管理
- 保持代码简洁，仅包含核心逻辑

**成功指标：**
- 游戏可以正常启动和运行
- 玩家可以控制蛇的移动方向
- 蛇可以吃食物并增长
- 游戏结束条件能够正确判断

## 范围（包含/不包含）

### 包含在本需求中

- ✅ 创建game目录结构
- ✅ 实现贪吃蛇游戏的基础逻辑（移动、吃食物、增长）
- ✅ 实现游戏结束判断（撞墙或撞自己）
- ✅ 实现简单的用户控制（方向键）
- ✅ 使用uv进行项目依赖管理
- ✅ 提供基础的README说明文档

### 不包含在本需求中

- ❌ 复杂的游戏特效和动画
- ❌ 分数系统和排行榜
- ❌ 多个难度级别
- ❌ 音效和背景音乐
- ❌ 暂停和重新开始功能
- ❌ 游戏配置界面
- ❌ 网络多人游戏功能

## 用户故事/使用场景

### 用户故事1：运行贪吃蛇游戏

**作为** 开发者/玩家  
**我想要** 能够快速启动和运行贪吃蛇游戏  
**以便** 体验游戏或学习代码实现

**验收标准：**
- [ ] 可以通过简单的命令启动游戏
- [ ] 游戏窗口正常显示
- [ ] 游戏界面清晰，能够识别蛇和食物

### 用户故事2：控制蛇的移动

**作为** 玩家  
**我想要** 使用方向键控制蛇的移动方向  
**以便** 吃到食物并避免撞墙或撞到自己

**验收标准：**
- [ ] 可以使用上下左右方向键控制蛇
- [ ] 蛇的移动响应流畅
- [ ] 蛇不能反向移动（例如正在向右时不能直接向左）

### 用户故事3：游戏基本玩法

**作为** 玩家  
**我想要** 蛇能够吃食物并增长，同时在撞墙或撞自己时游戏结束  
**以便** 获得完整的游戏体验

**验收标准：**
- [ ] 蛇吃到食物后身体增长
- [ ] 食物被吃掉后在新位置重新生成
- [ ] 撞墙时游戏结束
- [ ] 撞到自己的身体时游戏结束

## 功能需求

### 功能1：游戏初始化

**描述：** 初始化游戏窗口、蛇的初始位置、食物的初始位置等游戏元素

**输入：** 无（使用默认配置）

**处理：** 
- 创建游戏窗口
- 初始化蛇（长度为3，位于屏幕中央）
- 随机生成第一个食物的位置
- 设置初始移动方向（向右）

**输出：** 显示初始游戏界面

**边界条件：**
- 食物不能生成在蛇的身体上
- 游戏窗口大小固定，适合基本游戏体验

### 功能2：蛇的移动

**描述：** 根据玩家输入或当前方向，更新蛇的位置

**输入：** 方向键输入或当前移动方向

**处理：**
- 获取用户输入的方向
- 验证方向是否合法（不能反向）
- 计算蛇头的新位置
- 移动蛇身：蛇头移动到新位置，蛇尾跟随（如果没有吃到食物）

**输出：** 更新后的蛇的位置

**边界条件：**
- 不能180度转向（向右移动时不能直接向左）
- 移动速度适中，便于控制

### 功能3：食物生成和判断

**描述：** 生成食物并判断蛇是否吃到食物

**输入：** 蛇头的位置

**处理：**
- 判断蛇头是否与食物位置重合
- 如果吃到食物，蛇身增长，在新位置生成食物
- 如果没有吃到食物，正常移动

**输出：** 是否吃到食物的状态，以及新的食物位置（如果需要）

**边界条件：**
- 新食物不能生成在蛇身上
- 食物必须在游戏区域内

### 功能4：碰撞检测和游戏结束

**描述：** 检测蛇是否撞墙或撞到自己

**输入：** 蛇头的位置，蛇身的位置列表

**处理：**
- 检查蛇头是否超出游戏边界（撞墙）
- 检查蛇头是否与蛇身任一部分重合（撞到自己）
- 如果发生碰撞，触发游戏结束

**输出：** 游戏是否结束的状态

**边界条件：**
- 只检测蛇头与蛇身的碰撞，不检测蛇身之间的碰撞
- 游戏结束时显示简单的结束提示

## 非功能需求

### 性能要求

- 游戏帧率稳定，不少于30fps
- 输入响应延迟 < 50ms
- 内存占用 < 100MB

### 安全要求

- 无网络通信，无安全风险
- 不访问敏感系统资源

### 可用性要求

- 代码简洁易懂，适合初学者阅读
- 提供清晰的运行说明

### 兼容性要求

- Python 3.8+
- 支持Windows、macOS、Linux操作系统
- 使用uv进行依赖管理

## 技术方案（概要）

### 架构设计

采用简单的单文件设计，包含以下主要组件：
- 游戏主循环（Game Loop）
- 蛇对象（Snake）
- 食物对象（Food）
- 渲染模块（使用pygame库）
- 输入处理模块

### 关键技术选型

- **Python**: 简单易学的编程语言，适合快速开发
- **pygame**: 成熟的Python游戏开发库，提供图形和输入处理功能
- **uv**: 现代化的Python包管理工具，快速且易用

### 数据模型

```python
# 蛇的数据结构
snake = {
    'body': [(x1, y1), (x2, y2), (x3, y3)],  # 蛇身坐标列表
    'direction': 'RIGHT'  # 当前移动方向
}

# 食物的数据结构
food = {
    'position': (x, y)  # 食物坐标
}
```

### 接口设计

不涉及外部API，仅为单机游戏。

## 验收标准

### 功能验收

- [ ] 游戏可以通过`uv run`命令启动
- [ ] 游戏窗口正常显示，界面清晰
- [ ] 可以使用方向键控制蛇的移动
- [ ] 蛇吃到食物后会增长
- [ ] 食物被吃掉后在新位置重新生成
- [ ] 撞墙时游戏结束并显示提示
- [ ] 撞到自己时游戏结束并显示提示
- [ ] README文档清晰说明如何运行游戏

### 性能验收

- [ ] 游戏运行流畅，无明显卡顿
- [ ] 输入响应及时，无延迟感

### 安全验收

- [ ] 代码中无硬编码的敏感信息
- [ ] 不包含恶意代码

## 约束与限制

### 技术约束

- 必须使用uv进行Python依赖管理
- 代码应尽量简洁，避免过度设计
- 仅使用pygame作为图形库

### 时间约束

- 无特定时间限制，但应保持简单以便快速实现

### 资源约束

- 单人开发
- 无预算限制（使用开源工具）

## 风险与回滚

### 潜在风险

| 风险 | 影响程度 | 发生概率 | 缓解措施 |
|------|---------|---------|---------|
| pygame库在某些系统上安装困难 | 中 | 低 | 提供详细的安装说明，必要时使用其他轻量级库 |
| uv工具兼容性问题 | 中 | 低 | 在多个系统上测试，提供备选方案 |
| 游戏性能不佳 | 低 | 低 | 优化游戏循环，降低帧率要求 |

### 回滚方案

本需求为新增功能，回滚较为简单。

**回滚步骤：**
1. 删除game目录
2. 更新.gitignore（如有修改）
3. 恢复到添加游戏前的状态

**回滚验证：**
- [ ] 确认game目录已删除
- [ ] 确认仓库状态恢复正常
- [ ] 确认其他功能未受影响

## 非目标

明确说明本需求不打算解决的问题：

- ❌ 不实现复杂的游戏特效
- ❌ 不实现积分系统和排行榜
- ❌ 不实现多人游戏模式
- ❌ 不实现游戏暂停和存档功能
- ❌ 不实现关卡系统和难度选择
- ❌ 不实现音效和音乐

## 依赖关系

### 依赖的其他需求/系统

- Python 3.8+ 运行环境
- uv包管理工具
- pygame库

### 被依赖的需求/系统

- 无其他需求依赖此游戏项目

## 参考资料

- [Python官方文档](https://docs.python.org/)
- [pygame官方文档](https://www.pygame.org/docs/)
- [uv官方文档](https://github.com/astral-sh/uv)
- Epic #66: 原始需求Issue

---

**审批记录**

| 审批人 | 角色 | 审批时间 | 审批意见 |
|-------|------|---------|---------|
| | | | |
