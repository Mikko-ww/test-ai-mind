# 需求文档

> **Issue**: #6
> **创建时间**: 2026-02-06
> **状态**: 待审批

## 需求概述

### 需求描述

在项目根目录创建一个 `game` 目录用于存放 Python 小游戏项目，并在该目录下实现一个简单的贪吃蛇游戏。项目使用 `uv` 作为 Python 包管理工具，确保开发流程简单高效。

### 用意与目标

通过实现一个简单的贪吃蛇游戏，帮助开发者：
- 熟悉 Python 游戏开发的基础知识
- 掌握 `uv` 工具的基本使用方法
- 学习简单游戏逻辑的实现

**主要目标：**
- 创建一个可运行的贪吃蛇游戏
- 使用 `uv` 管理 Python 依赖和环境
- 保持代码简单易懂，适合学习

**预期收益：**
- 提升 Python 游戏开发能力
- 熟悉现代 Python 工具链（uv）
- 为后续添加更多小游戏奠定基础

## 背景分析

### 当前问题

项目目前缺少实践性的 Python 游戏开发示例，开发者需要一个简单的入门项目来学习：
- Python 游戏开发的基本概念
- 如何使用现代 Python 工具管理项目
- 游戏循环、碰撞检测等基础游戏逻辑

### 业务价值

- **学习价值**：提供一个完整的 Python 游戏开发示例
- **技术积累**：建立小游戏项目库，方便后续扩展
- **工具实践**：熟悉 `uv` 这一现代化的 Python 包管理工具

### 用户场景

1. 开发者想学习 Python 游戏开发，查看示例代码
2. 开发者想了解如何使用 `uv` 管理 Python 项目
3. 开发者想快速运行一个简单的游戏进行测试

## 功能范围

### 包含功能

- ✅ 创建 `game` 目录结构
- ✅ 实现基础的贪吃蛇游戏逻辑（蛇的移动、食物生成、碰撞检测）
- ✅ 使用 `pygame` 库实现简单的图形界面
- ✅ 使用 `uv` 管理项目依赖
- ✅ 提供游戏运行说明文档
- ✅ 基本的得分统计功能

### 不包含功能

- ❌ 复杂的游戏界面和动画效果
- ❌ 多级难度选择
- ❌ 排行榜系统
- ❌ 音效和背景音乐
- ❌ 暂停和恢复功能
- ❌ 游戏存档功能
- ❌ 多人对战模式

## 用户故事

### 用户故事1：快速开始游戏

**作为** 开发者  
**我想要** 通过简单的命令运行贪吃蛇游戏  
**以便** 快速体验游戏并学习代码实现

**验收标准：**
- [ ] 游戏目录包含清晰的 README 说明
- [ ] 可以通过 `uv run` 命令启动游戏
- [ ] 游戏窗口正常显示并可以操作

### 用户故事2：学习游戏代码

**作为** Python 学习者  
**我想要** 阅读简单清晰的贪吃蛇代码  
**以便** 理解游戏开发的基本概念

**验收标准：**
- [ ] 代码结构清晰，逻辑简单
- [ ] 包含必要的注释说明关键逻辑
- [ ] 代码行数控制在 200 行以内

### 用户故事3：使用 uv 管理项目

**作为** 开发者  
**我想要** 通过 `uv` 管理游戏项目的依赖  
**以便** 学习现代 Python 工具的使用

**验收标准：**
- [ ] 项目包含 `pyproject.toml` 配置文件
- [ ] 可以使用 `uv sync` 安装依赖
- [ ] 依赖管理简单明确

## 功能需求

### 功能1：游戏基础框架

**描述：** 建立游戏的基本框架，包括游戏窗口、游戏循环和事件处理

**输入：** 用户运行游戏命令

**处理：** 
- 初始化 pygame 窗口
- 创建游戏主循环
- 处理键盘输入事件（方向键）

**输出：** 显示游戏窗口并响应用户输入

**边界条件：**
- 窗口大小固定（如 600x400 像素）
- 帧率固定（如 10 FPS）

### 功能2：蛇的移动和控制

**描述：** 实现蛇的移动逻辑和方向控制

**输入：** 键盘方向键（上下左右）

**处理：**
- 根据方向键改变蛇的移动方向
- 每帧更新蛇的位置
- 防止蛇反向移动（例如向右时不能直接向左）

**输出：** 蛇在屏幕上按照指定方向移动

**边界条件：**
- 不能180度转向
- 移动速度恒定

### 功能3：食物生成和碰撞检测

**描述：** 在游戏区域随机生成食物，检测蛇是否吃到食物

**输入：** 游戏状态

**处理：**
- 在随机位置生成食物
- 检测蛇头是否与食物重叠
- 吃到食物后蛇身增长，重新生成食物

**输出：** 食物显示在屏幕上，蛇吃到食物后增长

**边界条件：**
- 食物不能生成在蛇身上
- 食物位置在游戏区域内

### 功能4：游戏结束判定

**描述：** 检测游戏结束条件（撞墙或撞到自己）

**输入：** 蛇的当前位置

**处理：**
- 检测蛇头是否撞到边界
- 检测蛇头是否撞到自己的身体
- 游戏结束时显示分数

**输出：** 游戏结束提示和最终分数

**边界条件：**
- 撞墙判定精确
- 撞到身体的判定准确

## 非功能需求

### 性能要求

- 游戏运行流畅，帧率稳定在 10 FPS
- 游戏启动时间 < 2 秒
- 内存占用 < 50MB

### 安全要求

- 代码无明显安全漏洞
- 不访问敏感系统资源

### 可用性要求

- 操作简单，仅需方向键控制
- 游戏规则清晰，易于理解
- 支持快速退出（ESC 或关闭窗口）

### 兼容性要求

- Python 3.10+ 版本
- 支持 Windows、macOS、Linux 系统
- 使用 pygame 作为图形库

## 技术方案建议

### 推荐技术栈

- **Python 3.10+**: 现代 Python 特性支持
- **pygame**: 成熟的 Python 游戏开发库，简单易用
- **uv**: 快速的 Python 包管理工具，替代 pip 和 poetry

### 架构建议

```
game/
├── snake/
│   ├── __init__.py
│   ├── snake.py          # 主游戏文件
│   ├── pyproject.toml    # uv 项目配置
│   └── README.md         # 游戏说明文档
```

### 关键技术点

- 使用 pygame 的基本绘图功能
- 实现简单的游戏循环和状态管理
- 使用列表管理蛇的身体坐标
- 使用 uv 的 `pyproject.toml` 管理依赖

## 验收标准

### 功能验收

- [ ] 游戏可以正常启动并显示窗口
- [ ] 蛇可以通过方向键控制移动
- [ ] 食物可以随机生成，蛇吃到食物后身体增长
- [ ] 撞墙或撞到自己时游戏结束并显示分数
- [ ] 使用 `uv sync` 可以安装依赖
- [ ] 使用 `uv run python snake/snake.py` 可以启动游戏
- [ ] README 包含清晰的运行说明

### 性能验收

- [ ] 游戏运行流畅，无明显卡顿
- [ ] 键盘响应及时，无延迟

### 用户体验验收

- [ ] 游戏界面简洁清晰
- [ ] 操作直观，容易上手
- [ ] 代码简单易读，适合学习

## 约束与限制

### 技术约束

- 必须使用 `uv` 作为包管理工具
- 必须使用 Python 实现
- 游戏逻辑要保持简单，代码量不超过 200 行
- 使用 pygame 库实现图形界面

### 时间约束

- 需在合理时间内完成，不追求复杂功能

### 资源约束

- 仅使用标准的 Python 库和 pygame
- 不引入复杂的第三方依赖

## 风险评估

### 潜在风险

| 风险 | 影响程度 | 发生概率 | 缓解措施 |
|------|---------|---------|---------|
| uv 工具使用不熟悉 | 中 | 中 | 提供详细的 uv 使用文档和示例 |
| pygame 在某些系统上安装困难 | 中 | 低 | 在 README 中提供详细的安装说明 |
| 游戏逻辑实现过于复杂 | 低 | 低 | 严格控制功能范围，保持简单 |

### 依赖关系

- Python 3.10+ 环境
- uv 工具已安装
- pygame 库可正常安装

## 实施建议

### 优先级

- **优先级**: 中
- **紧急程度**: 一般

### 预估工作量

- **预估时间**: 1-2 天
- **复杂度**: 低

### 建议的实施阶段

1. **第一阶段：项目结构搭建**
   - 创建 game/snake 目录
   - 配置 uv 项目（pyproject.toml）
   - 编写 README 文档

2. **第二阶段：核心功能实现**
   - 实现游戏基础框架（窗口、游戏循环）
   - 实现蛇的移动和控制逻辑
   - 实现食物生成和碰撞检测

3. **第三阶段：测试和完善**
   - 测试各种边界情况
   - 优化代码结构
   - 完善文档说明

## 补充信息

### 参考资料

- [pygame 官方文档](https://www.pygame.org/docs/)
- [uv 官方文档](https://github.com/astral-sh/uv)
- [Python 贪吃蛇游戏教程](https://realpython.com/pygame-a-primer/)

### 相关Issue/PR

- Issue #6: 贪吃蛇游戏

---

## 审批说明

**请审查以下内容：**

1. ✅ 需求描述是否清晰完整
2. ✅ 功能范围是否合理
3. ✅ 验收标准是否明确可测
4. ✅ 风险评估是否充分
5. ✅ 技术方案是否可行

**审批操作：**

- **通过**: 合并此PR，系统将自动生成Spec（需求规格说明书）
- **修改**: 在PR中提出修改意见，Copilot会根据反馈调整
- **拒绝**: 关闭PR并在原Issue中说明原因

---

**注意**: 本文档由Copilot根据用户的简单需求描述自动生成，旨在帮助用户快速形成完整的需求文档。审批通过后将进入正式的Spec → Plan → Implementation流程。
