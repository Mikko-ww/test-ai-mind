---
# 执行计划配置文件
# Parent Issue: #48
# 创建时间: 2026-02-12

metadata:
  parent_issue: 48
  spec_doc: null
  total_tasks: 3
  completed: 0
  status: pending
  last_updated: 2026-02-12T07:52:16.369Z

# 任务列表
tasks:
  - id: task-1
    title: "实现贪吃蛇核心逻辑（Snake和Food类）"
    level: L2
    status: pending
    estimated_effort: Medium
    description: |
      在game/main.py中实现贪吃蛇游戏的核心数据结构和逻辑，包括Snake类（蛇的移动、增长、碰撞检测）和Food类（食物的生成和位置管理）。
    acceptance_criteria:
      - Snake类实现完成，包含蛇的移动、增长和方向控制逻辑
      - Food类实现完成，可以在随机位置生成食物
      - 实现碰撞检测逻辑（吃食物、撞墙、撞自己）
      - 代码结构清晰，有必要的注释
    deps: []
    prerequisites:
      - game目录和uv环境已配置（已完成）
      - pyproject.toml包含pygame依赖（已完成）
    implementation_notes:
      - 使用列表存储蛇身坐标（每个坐标是一个元组）
      - 蛇头始终是列表的第一个元素
      - 实现方向控制，防止反向移动
      - 食物不能生成在蛇身上
      - 碰撞检测包括：蛇头撞墙、蛇头撞蛇身、蛇头吃食物
    testing_requirements:
      - 手动测试核心逻辑的正确性
      - 验证边界条件和特殊情况
    issue: null
    pr: null

  - id: task-2
    title: "实现pygame游戏界面和主循环"
    level: L2
    status: pending
    estimated_effort: Medium
    description: |
      使用pygame实现游戏界面的渲染和交互，包括游戏主循环、事件处理、蛇和食物的绘制、分数显示等。
    acceptance_criteria:
      - pygame窗口正常显示，大小适中（建议400x400或600x600）
      - 蛇使用绿色方块渲染，食物使用红色方块渲染
      - 背景使用黑色或深色
      - 键盘方向键控制蛇的移动
      - 实时显示当前分数
      - 游戏结束时显示"Game Over"和最终分数
      - 游戏帧率合理（建议10-15 FPS）
    deps:
      - task-1
    prerequisites:
      - Snake和Food类已实现
      - pygame依赖已通过uv安装
    implementation_notes:
      - 初始化pygame和创建游戏窗口
      - 设置合适的格子大小（建议20x20像素）
      - 实现游戏主循环（事件处理、游戏逻辑更新、界面渲染）
      - 使用pygame.draw.rect绘制方块
      - 使用pygame.font渲染文字（分数和Game Over）
      - 使用pygame.time.Clock控制帧率
    testing_requirements:
      - 手动运行游戏测试所有功能
      - 测试键盘输入响应
      - 测试游戏结束流程
      - 确保在不同系统上可以正常运行
    issue: null
    pr: null

  - id: task-3
    title: "优化代码和完善文档"
    level: L1
    status: pending
    estimated_effort: Small
    description: |
      优化代码结构，添加必要的注释，确保README文档与实际实现一致，进行最终测试。
    acceptance_criteria:
      - 代码有清晰的注释说明关键逻辑
      - README.md与实际实现一致
      - 游戏可以通过uv run python main.py正常启动
      - 代码风格统一，结构清晰
      - 无明显的bug或问题
    deps:
      - task-2
    prerequisites:
      - 游戏核心功能已实现
      - pygame界面已完成
    implementation_notes:
      - 检查代码是否有冗余或可优化的部分
      - 添加关键函数和类的文档字符串
      - 确保代码符合Python规范
      - 验证README中的安装和运行说明
      - 进行完整的端到端测试
    testing_requirements:
      - 从全新环境测试安装和运行流程
      - 验证README文档的准确性
      - 完整游戏一局测试所有功能
    issue: null
    pr: null

# 风险与注意事项
risks:
  overall:
    - pygame在某些系统上可能需要额外的系统依赖（SDL库）
    - 不同操作系统的pygame表现可能略有差异
    - 游戏帧率需要调整到合适的速度，太快或太慢都会影响体验
  critical_path:
    - task-1是核心，必须保证逻辑正确性
    - task-2的pygame集成是关键，需要确保跨平台兼容性
  blockers:
    - 如果pygame无法正常安装，README中已包含系统依赖安装说明
    - 如果在CI环境测试有问题，可能需要调整或跳过图形界面测试

# 执行策略
execution_strategy:
  mode: sequential
  description: |
    本计划采用严格串行执行策略：
    - 同一时间只有一个任务处于in-progress状态
    - 任务必须按照ID顺序执行
    - 前一个任务完成并合并后，才会开始下一个任务
  failure_handling:
    - 任务失败时进入blocked状态
    - 等待人工介入（/retry重试或/abort终止）
    - 修复后继续执行
  pause_resume:
    - 使用/pause命令暂停任务派发
    - 使用/resume命令恢复任务派发
    - 暂停期间不创建新的任务PR

# 状态定义
status_definitions:
  pending: "任务等待开始"
  in_progress: "任务正在执行（Copilot已被分配）"
  in_review: "任务PR已创建，等待审查/合并"
  blocked: "任务被阻塞，需要人工介入"
  done: "任务已完成并合并"
  cancelled: "任务被取消"
